!function(t,o){"use strict";var e=function(t,e,i){return o.tpl[t]({locale:e,options:i})},i=function(e,i){this.el=e;var n=i||s;for(var r in n.customTemplates)o.tpl[r]=n.customTemplates[r];this.toolbar=this.createToolbar(e,n),this.editor=this.createEditor(i),window.editor=this.editor,t("iframe.wysihtml5-sandbox").each(function(o,e){t(e.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){t("li.dropdown").removeClass("open")}})})};i.prototype={constructor:i,createEditor:function(e){e=e||{},e=t.extend(!0,{},e),e.toolbar=this.toolbar[0];var i=new o.Editor(this.el[0],e);if(e&&e.events)for(var n in e.events)i.on(n,e.events[n]);return i},createToolbar:function(o,i){var n=this,a=t("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=i.locale||s.locale||"en";for(var c in s){var d=!1;void 0!==i[c]?i[c]===!0&&(d=!0):d=s[c],d===!0&&(a.append(e(c,r[l],i)),"html"===c&&this.initHtml(a),"link"===c&&this.initInsertLink(a),"image"===c&&this.initInsertImage(a))}if(i.toolbar)for(c in i.toolbar)a.append(i.toolbar[c]);return a.find('a[data-wysihtml5-command="formatBlock"]').click(function(o){var e=o.target||o.srcElement,i=t(e);n.toolbar.find(".current-font").text(i.html())}),a.find('a[data-wysihtml5-command="foreColor"]').click(function(o){var e=o.target||o.srcElement,i=t(e);n.toolbar.find(".current-color").text(i.html())}),this.el.before(a),a},initHtml:function(t){var o='a[data-wysihtml5-action="change_view"]';t.find(o).click(function(e){t.find("a.btn").not(o).toggleClass("disabled")})},initInsertImage:function(o){var e=this,i=o.find(".bootstrap-wysihtml5-insert-image-modal"),n=i.find(".bootstrap-wysihtml5-insert-image-url"),s=i.find("a.btn-primary"),r=n.val(),a,l=function(){var t=n.val();n.val(r),e.editor.currentView.element.focus(),a&&(e.editor.composer.selection.setBookmark(a),a=null),e.editor.composer.commands.exec("insertImage",t)};n.keypress(function(t){13==t.which&&(l(),i.modal("hide"))}),s.click(l),i.on("shown",function(){n.focus()}),i.on("hide",function(){e.editor.currentView.element.focus()}),o.find("a[data-wysihtml5-command=insertImage]").click(function(){var o=t(this).hasClass("wysihtml5-command-active");return o?!0:(e.editor.currentView.element.focus(!1),a=e.editor.composer.selection.getBookmark(),i.appendTo("body").modal("show"),i.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})},initInsertLink:function(o){var e=this,i=o.find(".bootstrap-wysihtml5-insert-link-modal"),n=i.find(".bootstrap-wysihtml5-insert-link-url"),s=i.find(".bootstrap-wysihtml5-insert-link-target"),r=i.find("a.btn-primary"),a=n.val(),l,c=function(){var t=n.val();n.val(a),e.editor.currentView.element.focus(),l&&(e.editor.composer.selection.setBookmark(l),l=null);var o=s.prop("checked");e.editor.composer.commands.exec("createLink",{href:t,target:o?"_blank":"_self",rel:o?"nofollow":""})},d=!1;n.keypress(function(t){13==t.which&&(c(),i.modal("hide"))}),r.click(c),i.on("shown",function(){n.focus()}),i.on("hide",function(){e.editor.currentView.element.focus()}),o.find("a[data-wysihtml5-command=createLink]").click(function(){var o=t(this).hasClass("wysihtml5-command-active");return o?!0:(e.editor.currentView.element.focus(!1),l=e.editor.composer.selection.getBookmark(),i.appendTo("body").modal("show"),i.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})}};var n={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(o){return this.each(function(){var e=t(this);e.data("wysihtml5",new i(e,o))})},shallowExtend:function(o){var e=t.extend({},t.fn.wysihtml5.defaultOptions,o||{},t(this).data()),i=this;return n.bypassDefaults.apply(i,[e])},deepExtend:function(o){var e=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,o||{}),i=this;return n.bypassDefaults.apply(i,[e])},init:function(t){var o=this;return n.shallowExtend.apply(o,[t])}};t.fn.wysihtml5=function(o){return n[o]?n[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void t.error("Method "+o+" does not exist on jQuery.wysihtml5"):n.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=i;var s=t.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,code:1,pre:1}},locale:"en"};"undefined"==typeof t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var r=t.fn.wysihtml5.locale={}}(window.jQuery,window.wysihtml5);